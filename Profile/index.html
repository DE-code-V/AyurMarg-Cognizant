<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Dashboard</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  
  <div class="actual_body">

    <div class="left-panel">

      <div class="logo">
        <!-- Logo and Title -->
        <img src="logo.png" alt="Ayurmarg Logo">
        <span>Ayurmarg</span>
      </div>
  
      <div class="user-profile">
  
          <!-- User Photo -->
          <div class="user-photo">
            <!-- Fix the typo here -->
            <img src="user-1.png" alt="User Photo">
          </div>
  
          <!-- User Info -->
          <form id="userInfoForm">
            <div class="user-info">
              <h2>User Profile</h2>
              <label id="usernameLabel" for="username">Username:Mohit Bagul</label><br>
              <label id="mobileLabel" for="mobile">Mobile Number:7885603440</label><br>
              <label id="emailLabel" for="email">Email:mohit55@gmail.com</label><br>
              <label id="sexLabel" for="sex">Sex:Male</label><br>
              <label id="ageLabel" for="age">Age:20</label><br>
              <label id="weightLabel" for="weight">Weight:65</label><br>
              <label id="bloodGroupLabel" for="bloodGroup">Blood Group:A+</label><br>
              <label id="addressLabel" for="address">Address:Gokuldham Society,Mumbai</label><br><br>
              <button type="submit">Save</button>
            </div>
          </form>
  
      </div>
  
    </div>

    
    <div class="right-panel">
      <!-- Content for the right panel -->
      <div class="navbar">
          <ul>
            <li><a href="../Homepage/index.html">Home</a></li>
            <li><a href="../prakriti finder website/index.html">Prakriti</a></li>
            <li><a href="#ai-doctor">AI Doctor</a></li>                         <!--ðŸ™ƒ-->
            <li class="right-icons">
              <div class="options">
                <a href="whatsapp-link"><img src="whatsapp.png" alt="WhatsApp"></a>
                <a href="../Profile/index.html"><img src="user.png" alt="Profile"></a>
                <a href="shopping-cart-link"><img src="cart.png" alt="Cart"></a>
              </div>
            </li>
          </ul>
        </div>
  
  
        
        <div class="upper-section">
              
              <div class="upper-left">
                  <!-- Content for upper left section -->
                  <div class="prakriti-section">
                      <h2>Prakriti Analysis</h2>
                      <div class="card">
                          <!-- Content for the card -->
                          Card content...
                      </div>
                      <div class="link-btn-container">
                          <div class="link">
                              <a href="https://ayush.delhi.gov.in/ayush/prakriti">Know more about Prakriti</a>
                          </div>
                          <a href="../prakriti finder website/"><button class="find-prakriti-btn">Find Your Prakriti</button></a>
                      </div>
                  </div>
              </div>
           <!-- upper right section  -->
           <div class="upper-right">
            <div class="prescription-section">
              <h2>My Prescription</h2>
              <div class="card">
                <!-- Content for the card -->
                Card content...
              </div>
              <div class="button-group">
                <button class="view-prescription-btn">View Prescription</button>
                <button class="my-diet-btn">My Diet</button>
                <button class="my-lifestyle-btn">My Lifestyle</button>
              </div>
            </div>
          </div>
          
          </div>
  
  
          <!-- lower-section  -->
          <div class="lower-section">
              <div class="section-1">
                <div class="content-wrapper">
                  <h2>My Doctor</h2>
                  <!-- Doctor's photo, name, expertise -->
                  <div class="doctor-info">
                    <!-- <img src="doctor-photo.jpg" alt="Doctor's Photo"> -->
                    <h3 id="doctorName">Doctor Name</h3>
                    <p id="doctorExpertise">Expertise: Specialization</p>
                  </div>
                  <button class="book-call-btn">Book a Call</button>
                </div>
              </div>
              <div class="section-2">
                <div class="content-wrapper">
                  <h2>My Health Record</h2>
                  <p id="healthRecord">My Health Record is...</p>
                  <div class="upload-buttons">
                    <button class="upload-file-btn">Upload Files</button>
                    <button class="upload-photo-btn">Upload Photos</button>
                    <button class="upload-text-btn">Upload Text</button>
                  </div>
                </div>
              </div>
              <div class="section-3">
                <div class="subsection-1">
                  <div class="content-wrapper">
                    <h2>My Cart</h2>
                    <button class="see-purchases-btn">See Your Purchases</button>
                  </div>
                </div>
                <div class="subsection-2">
                  <div class="content-wrapper">
                    <h2>My Community</h2>
                    <button class="join-channel-btn">Join Channel</button>
                  </div>
                </div>
              </div>
            </div>
            
            
        </div>
  
        
  
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-section about">
          <h3>About Us</h3>
        <p>Team Ayurmarg <br> ---Pioneers of AI powered Ayurveda</p>
        </div>
        <div class="footer-section contact">
          <h3>Contact Information</h3>
        <p>Email: ayurmarg@gmail.com</p>
        <p>Phone: +7887433879</p>
        <p>Address: Akurdi, Pune, India</p>
        </div>
        <div class="footer-section links">
          <h3>Useful Links</h3>
          <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Portfolio</a></li>
            <li><a href="#">Testimonials</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2023 Ayurmarg. All rights reserved.</p>
      </div>
    </footer>

    <script src="index.js"></script>
    
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
      import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
      import { getDatabase, ref, get, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

      const firebaseConfig = {
        // Your Firebase configuration
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getDatabase(app);

      let userRef;
      
      document.getElementById('userInfoForm').addEventListener('submit', function (event) {
        event.preventDefault();

        if (userRef) {
          const formData = new FormData(event.target);
          const formDataObject = {};
          formData.forEach((value, key) => {
            formDataObject[key] = value;
          });

          set(userRef, formDataObject).then(() => {
            // After the update is complete, replace input tags with labels and display values
            Object.entries(formDataObject).forEach(([key, value]) => {
              document.getElementById(key + 'Label').innerText = key.charAt(0).toUpperCase() + key.slice(1) + ': ' + value;
            });
          }).catch((error) => {
            console.error("Error updating data:", error);
          });
        } else {
          console.error("User reference is undefined");
        }
      });

      // Sample data for testing
      onAuthStateChanged(auth, (user) => {
        if (user) {
          userRef = ref(db, 'users/' + user.uid + '/additionalData');
          get(userRef).then((snapshot) => {
            const userData = snapshot.val();
            if (userData && userData.additionalData) {
              // Populate form fields with sample data for testing
              document.getElementById('username').value = userData.additionalData.username || 'John Doe';
              document.getElementById('mobile').value = userData.additionalData.mobile || '1234567890';
              document.getElementById('email').value = userData.additionalData.email || 'john@example.com';
              document.getElementById('sex').value = userData.additionalData.sex || 'Male';
              document.getElementById('age').value = userData.additionalData.age || '25';
              document.getElementById('weight').value = userData.additionalData.weight || '70';
              document.getElementById('bloodGroup').value = userData.additionalData.bloodGroup || 'O+';
              document.getElementById('address').value = userData.additionalData.address || '123 Street, City, Country';
            }
          });
        } else {
          window.location.href = '../Sign-Up%202/index.html';
        }
      });
    </script>

  </body>
</html>
